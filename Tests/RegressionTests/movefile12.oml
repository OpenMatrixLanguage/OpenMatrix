% movefile-note copy files to cause normal movefile to fail

returndir = pwd;
cd FileManipulation

cd movefile
dir

disp('copy test files to dir2 prior to movefile test to cause fail')
command = 'copyfile(''test*'', ''dir2'')'
eval(command)

command = 'dir dir1'
eval(command)

command = 'dir dir2'
eval(command)

disp('move file to directory, which should fail because the files were copied above')
command = 'movefile(''test1.txt'', ''dir2'')'
eval(command)

dir

command = 'dir dir1'
eval(command)

command = 'dir dir2'
eval(command)

disp('move file from directory to current directory which should fail')
command = 'movefile(''dir2/test1.txt'', ''.'')'
eval(command)

dir

command = 'dir dir1'
eval(command)

command = 'dir dir2'
eval(command)

disp('move files back to root directory, which should fail.')
command = 'movefile(''dir2/*'', ''.'')'
eval(command)

dir

command = 'dir dir1'
eval(command)

command = 'dir dir2'
eval(command)

disp('move files back to root directory with force, which will restore the test directory.')
command = 'movefile(''dir2/test1.txt'', ''.'', ''f'')'
eval(command)
command = 'movefile(''dir2/test2.txt'', ''.'', ''f'')'
eval(command)

dir

command = 'dir dir1'
eval(command)

command = 'dir dir2'
eval(command)

cd(returndir)
